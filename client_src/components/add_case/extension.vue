<template>
  <div>
    <div class="row">
      <div class="col-1">
        <select class="custom-select" v-model="parentStep" v-on:change="changeParent()">
          <option v-for="(step, index) in course">{{ index + 1 }}</option>
        </select>
      </div>
      <div class="col-11">
        <template v-for="step in item.extensionSteps">
          <div class="input-group">
            <span class="input-group-addon"> {{ indexToLetter(step.index) }} </span>
            <input type="text" class="form-control" v-model="step.text">
            <span class="input-group-btn">
              <button class="btn btn-success" title="New Step" v-on:click="addStep(index, step.index)">
                <i class="fa fa-plus"></i>
              </button>
            </span>
            <span class="input-group-btn">
              <button class="btn btn-success"
                      title="Remove Step"
                      v-on:click="removeStep(index, step.index)">
                <i class="fa fa-remove"></i>
              </button>
            </span>
          </div>
        </template>
      </div>
    </div>
    <hr>
  </div>
</template>

<script>
    export default {
        props: ['course', 'item', 'index'],
        data: function () {
            return {
                parentStep: 0
            }
        },
        methods: {
            indexToLetter: function (index) {
                return (index + 9).toString(36);
            },

            addStep: function (extensionIndex, stepIndex) {
                this.$emit('add-step', extensionIndex, stepIndex);
            },
            removeStep: function (extensionIndex, stepIndex) {
                this.$emit('remove-step', extensionIndex, stepIndex);
            },
            changeParent: function () {
                this.$emit('change-parent-step', this.parentStep, this.index);
            }
        }
    }

</script>